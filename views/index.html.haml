
- content_for :head do

  = #javascript_include_tag 'rails'
  = javascript_include_tag 'require'
  = javascript_include_tag 'lib/underscore-min'
  = javascript_include_tag 'lib/mootools-core-1.3.2-full-nocompat'
  = javascript_include_tag 'lib/mootools-more-1.3.2.1.js'
  = javascript_include_tag 'lib/mooml.js'
  = javascript_include_tag 'application'
  = javascript_include_tag 'qunit.js'
  = javascript_include_tag 'lib/jquery.js'

  :javascript
      require({
        paths: {
            "platform" : "/javascripts/platform",
            "unit"     : "/javascripts/unit"
        },
      });


  = stylesheet_link_tag "reset"
  = stylesheet_link_tag "sheet"
  = stylesheet_link_tag "qunit"

%body

  :javascript

    jQuery.noConflict();

    var oldAttach = require.attach;
    require.attach = function (url, contextName, moduleName, callback, type) {
        url += (url.indexOf('?') === -1 ? '?' : '&') + 'bust=' + (new
            Date()).getTime()
        return oldAttach.call(require, url, contextName, moduleName,
            callback, type);
    }

    require(["platform/start"])

    //$("#tabs").tabs();

  %h1#qunit-header
    QUnit example
  %h2#qunit-banner
  #qunit-testrunner-toolbar
  %h2#qunit-userAgent
  %ol#qunit-tests
  #qunit-fixture
    test markup, will be hidden
